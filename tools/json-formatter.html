<!--
============================================
JSON FORMATTER v1.0.0
============================================
Description: Browser-based JSON validation, formatting,
and minification tool with precision loss detection.

Dependencies: None (Vanilla JavaScript)

Project: Tools Hub by Jesse Anderson
Repository: https://github.com/jesse-anderson/Tools
License: GPL-3.0

Features:
- Format/pretty-print JSON with syntax highlighting
- Minify JSON by removing whitespace
- Real-time validation with common error detection
- Large integer precision loss warning (IEEE 754 limits)
- JSON statistics (size, keys, arrays, depth)
- Sample data loader with edge case examples

Last Updated: January 2025
============================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Formatter | Tools Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/shared.css">
    <link rel="stylesheet" href="../css/json_formatter/json-formatter.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <a href="../tools.html" class="back-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"/>
                            <polyline points="12 19 5 12 12 5"/>
                        </svg>
                        Back to Tools
                    </a>
                </div>
                <div class="header-right">
                    <div class="theme-toggle">
                        <button data-theme-toggle="light" aria-pressed="false" title="Light mode">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="5"/>
                                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                            </svg>
                        </button>
                        <button data-theme-toggle="dark" aria-pressed="false" title="Dark mode">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="tool-icon-container">
                <div class="tool-icon-header it">{}</div>
                <div>
                    <h1>JSON Formatter</h1>
                    <p class="tagline">// PARSE • VALIDATE • MINIFY</p>
                </div>
            </div>
        </header>

        <main>
            <div class="calculator-layout">
                <div class="calculator-panel">
                    <div class="panel-header">
                        <h2>Input Data</h2>
                        <p>Paste your JSON below to format, validate, or minify.</p>
                    </div>

                    <div class="error-banner" id="errorBanner" role="alert" aria-live="assertive">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="8" x2="12" y2="12"/>
                            <line x1="12" y1="16" x2="12.01" y2="16"/>
                        </svg>
                        <span id="errorText">Invalid JSON</span>
                    </div>

                    <div class="warning-banner" id="warningBanner" role="alert" aria-live="polite">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                            <line x1="12" y1="9" x2="12" y2="13"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        <span id="warningText">Warning: Large integers detected. Precision may be lost.</span>
                    </div>

                    <div class="success-banner" id="successBanner" role="status" aria-live="polite">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        <span>Valid JSON ✓</span>
                    </div>

                    <div class="toolbar">
                        <button id="formatBtn" class="tool-btn primary" aria-label="Format JSON with pretty-printing">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="4 14 10 14 10 20"/>
                                <polyline points="20 10 14 10 14 4"/>
                                <line x1="14" y1="10" x2="21" y2="3"/>
                                <line x1="3" y1="21" x2="10" y2="14"/>
                            </svg>
                            Format
                        </button>
                        <button id="minifyBtn" class="tool-btn" aria-label="Minify JSON by removing whitespace">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="4 7 4 4 20 4 20 7"/>
                                <line x1="9" y1="20" x2="15" y2="20"/>
                                <line x1="12" y1="4" x2="12" y2="20"/>
                            </svg>
                            Minify
                        </button>
                        <button id="copyBtn" class="tool-btn" aria-label="Copy formatted JSON to clipboard">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                            Copy
                        </button>
                        <button id="clearBtn" class="tool-btn danger" aria-label="Clear editor">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6"/>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                            </svg>
                            Clear
                        </button>
                    </div>

                    <div class="editor-container">
                        <label for="inputArea" class="visually-hidden">JSON Input</label>
                        <textarea id="inputArea" class="json-input" placeholder="// Paste JSON here..." spellcheck="false"></textarea>
                        <pre id="outputArea" class="json-output" role="region" aria-label="Formatted JSON output" aria-live="polite"></pre>
                    </div>
                </div>

                <aside class="sidebar">
                    <div class="sidebar-card">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                <line x1="8" y1="21" x2="16" y2="21"/>
                                <line x1="12" y1="17" x2="12" y2="21"/>
                            </svg>
                            Data Stats
                        </h3>
                        <div class="stat-row">
                            <span class="stat-label">Size (Bytes)</span>
                            <span class="stat-val" id="statSize">0 B</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Total Keys</span>
                            <span class="stat-val" id="statKeys">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Arrays</span>
                            <span class="stat-val" id="statArrays">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Depth</span>
                            <span class="stat-val" id="statDepth">0</span>
                        </div>
                    </div>

                    <div class="sidebar-card">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                            Quick Actions
                        </h3>
                        <button id="loadSampleBtn" class="tool-btn" aria-label="Load sample JSON data" style="width: 100%; justify-content: center; margin-bottom: 8px;">
                            Load Sample Data
                        </button>
                        <button id="editBtn" class="tool-btn" aria-label="Return to edit mode" style="width: 100%; justify-content: center; display: none;">
                            Return to Edit
                        </button>
                    </div>

                    <div class="disclaimer-card">
                        <div class="disclaimer-title">
                            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                <line x1="12" y1="9" x2="12" y2="13"/>
                                <line x1="12" y1="17" x2="12.01" y2="17"/>
                            </svg>
                            Critical Engineering Disclaimer
                        </div>
                        <div class="disclaimer-content">
                            <p style="margin-bottom: 8px;"><strong>Data Integrity Warning.</strong> This tool runs entirely in your browser, but be aware of JavaScript limitations:</p>
                            <ul class="disclaimer-list">
                                <li><strong>64-bit Integers:</strong> Standard JS `JSON.parse` treats numbers as IEEE 754 doubles. Integers larger than 2⁵³-1 (e.g. some Database IDs, Twitter Snowflakes) <strong>will lose precision</strong>.</li>
                                <li><strong>Privacy:</strong> While this does not upload data, avoid pasting production credentials or PII into any web-based clipboard.</li>
                                <li><strong>BigInt:</strong> Native JSON spec does not support BigInt literals (e.g. `123n`). They will cause parse errors.</li>
                            </ul>
                            <p class="disclaimer-footer">
                                PROVIDED "AS IS" WITH NO WARRANTY. NOT SUITABLE FOR VALIDATING CRITICAL FINANCIAL LEDGERS OR CRYPTOGRAPHIC KEYS.
                            </p>
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <footer data-footer></footer>
    </div>

    <script type="module" type="module" src="../js/shared.js"></script>
    <script type="module" src="../js/footer.js" defer></script>
    <script type="module" src="../js/json_formatter/json-formatter.js"></script>
</body>
</html>