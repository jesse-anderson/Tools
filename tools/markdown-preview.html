<!--
============================================
MARKDOWN PREVIEW v1.0.0
============================================
Description: Browser-based Markdown editor with live preview,
supporting three parsing modes (MD 1.0, CommonMark, GFM),
syntax highlighting, find/replace, and export capabilities.

Dependencies (pinned versions):
- marked.js: (ESM build for Markdown parsing)
    https://marked.js.org/
    MIT License: https://github.com/markedjs/marked/blob/master/LICENSE
- DOMPurify: (HTML sanitization)
    https://github.com/cure53/DOMPurify
    Apache 2.0 / MPL 2.0: https://github.com/cure53/DOMPurify/blob/main/LICENSE
- Prism.js: (Syntax highlighting)
    https://prismjs.com/
    MIT License: https://github.com/PrismJS/prism/blob/master/LICENSE

Project: Tools Hub by Jesse Anderson
Repository: https://github.com/jesse-anderson/Tools
License: GPL-3.0 - https://github.com/jesse-anderson/Tools/blob/main/LICENSE

Features:
- Three markdown modes: MD 1.0 (Gruber), CommonMark 0.31, GFM 0.29
- Live preview with synchronized scrolling
- Syntax highlighting with Prism.js (lazy-loaded languages)
- Find/replace with keyboard navigation
- Session-based image upload (drag-and-drop)
- Export to MD/HTML with theme-aware styling
- Print support
- Undo/redo system
- Autosave to localStorage
- Performance monitoring with experimental mode

Last Updated: January 2025
============================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com https://fonts.googleapis.com; img-src 'self' blob: data: https:; connect-src 'self' ws:;">
    <meta http-equiv="Permissions-Policy" content="unload=(self)">
    <title>Markdown Preview | Tools Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Note: Google Fonts does not support SRI hashes as CSS is dynamically generated.
         For full SRI support, consider self-hosting fonts and providing integrity hashes. -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap"
          rel="stylesheet"
          crossorigin="anonymous">
    <link rel="stylesheet" href="../css/shared.css">
    <!-- Prism.js syntax highlighting theme-->
    <link rel="stylesheet" href="../css/vendor/markdown/prism-tomorrow.min.css" />
    
    <!-- Tool-Specific CSS (split for maintainability) -->
    <link rel="stylesheet" href="../css/markdown_preview/markdown-preview-base.css">
    <link rel="stylesheet" href="../css/markdown_preview/markdown-preview-components.css">
    <link rel="stylesheet" href="../css/markdown_preview/markdown-preview-preview.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <a href="../tools.html" class="back-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <line x1="19" y1="12" x2="5" y2="12"/>
                            <polyline points="12 19 5 12 12 5"/>
                        </svg>
                        Back to Tools
                    </a>
                </div>
                <div class="header-right">
                    <div class="theme-toggle">
                        <button data-theme-toggle="light" aria-pressed="false" title="Light mode">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <circle cx="12" cy="12" r="5"/>
                                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
                            </svg>
                        </button>
                        <button data-theme-toggle="dark" aria-pressed="false" title="Dark mode">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="header-tool-icon-group">
                <div class="tool-icon-header it">
                    <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <path d="M12 18v-6"/>
                        <path d="M9 15l3 3 3-3"/>
                    </svg>
                </div>
                <div>
                    <h1>Markdown Preview</h1>
                    <p class="tagline">// Markdown 1.0 • CommonMark • GFM</p>
                </div>
            </div>
        </header>

        <main>
            <div class="calculator-layout">
                <div class="calculator-panel">
                    <div class="info-banner">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="12" y1="16" x2="12" y2="12"/>
                            <line x1="12" y1="8" x2="12.01" y2="8"/>
                        </svg>
                        <span><strong>Tip:</strong> Write or paste Markdown on the left to see rendered preview on the right.
    Load sample:
    <button id="sampleCommonmark" data-mode="commonmark" class="sample-link">CommonMark</button>
    ·
    <button id="sampleGfm" data-mode="gfm" class="sample-link">GFM</button>
    ·
    <button id="sampleOriginal" data-mode="original" class="sample-link">MD 1.0</button>
</span>

                    </div>

                    <div id="warningBanner" class="warning-banner hidden">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                            <line x1="12" y1="9" x2="12" y2="13"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        <span id="warningText"></span>
                    </div>

                    <!-- Find/Replace Bar -->
                    <div id="findReplaceBar" class="find-replace-bar" role="search" aria-label="Find and replace">
                        <input type="text" id="findInput" placeholder="Find..." aria-label="Search text">
                        <input type="text" id="replaceInput" placeholder="Replace..." aria-label="Replacement text">
                        <span class="find-info" id="findInfo">0 / 0</span>
                        <div class="find-actions">
                            <button class="find-btn" id="findPrevBtn" title="Previous (Shift+Enter)">↑ Prev</button>
                            <button class="find-btn" id="findNextBtn" title="Next (Enter)">↓ Next</button>
                            <button class="find-btn" id="replaceBtn" title="Replace current">Replace</button>
                            <button class="find-btn primary" id="replaceAllBtn" title="Replace all">All</button>
                        </div>
                        <button class="close-find" id="closeFindBtn" title="Close (Escape)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                        </button>
                    </div>

                    <!-- Toolbar -->
                    <div class="toolbar">
                        <div class="toolbar-group">
                            <button class="tool-btn" id="copyMarkdownBtn" title="Copy Markdown (Ctrl+Shift+C)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                                <span class="btn-text">Copy MD</span>
                            </button>
                            <button class="tool-btn" id="copyHtmlBtn" title="Copy HTML">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                                <span class="btn-text">Copy HTML</span>
                            </button>
                        </div>

                        <div class="tool-sep"></div>

                        <div class="toolbar-group">
                            <button class="tool-btn" id="downloadMdBtn" data-format="md" title="Download .md">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                <span class="btn-text">.md</span>
                            </button>
                            <button class="tool-btn" id="downloadHtmlBtn" data-format="html" title="Download .html">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                                <span class="btn-text">.html</span>
                            </button>
                            <button class="tool-btn" id="printBtn" title="Print (Ctrl+P)">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
                                <span class="btn-text">Print</span>
                            </button>
                        </div>

                        <div class="tool-sep"></div>

                        <div class="toolbar-group">
                            <button class="tool-btn danger" id="clearBtn" title="Clear">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                                <span class="btn-text">Clear</span>
                            </button>
                        </div>

                        <div class="tool-sep"></div>

                        <!-- Mode Toggle -->
                        <div class="mode-toggle">
                            <button id="modeOriginal" data-mode="original" title="Markdown 1.0 (Gruber)">MD 1.0</button>
                            <button id="modeCommonmark" class="active" data-mode="commonmark" title="CommonMark 0.31">CommonMark</button>
                            <button id="modeGfm" data-mode="gfm" title="GitHub Flavored Markdown 0.29">GFM</button>
                        </div>

                        <div class="tool-sep"></div>

                        <!-- Live Preview Toggle -->
                        <label class="toggle-switch">
                            <input type="checkbox" id="livePreviewToggle" checked>
                            <span id="livePreviewLabel">Live Preview</span>
                        </label>

                        <button class="tool-btn" id="updatePreviewBtn" style="display: none;" title="Update Preview">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                            <span class="btn-text">Update</span>
                        </button>

                        <div class="tool-sep"></div>

                        <!-- Insert Dropdown -->
                        <div class="dropdown">
                            <button class="tool-btn" id="insertDropdownBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                <span class="btn-text">Insert</span>
                                <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><polyline points="6 9 12 15 18 9"/></svg>
                            </button>
                            <div id="insertDropdown" class="dropdown-menu" tabindex="-1" role="menu">
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="bold">Bold <code>**text**</code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="italic">Italic <code>*text*</code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="code">Code <code>`code`</code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="codeblock">Code Block <code>```</code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="link">Link <code>[](url)</code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="image">Image <code>![](url)</code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="heading">Heading <code>## </code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="quote">Quote <code>> </code></div>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" data-format="task">Task List <code>- [ ]</code></div>
                            </div>
                        </div>

                        <!-- Experimental Mode (right side) -->
                        <label class="toggle-switch ml-auto" title="Bypass performance limits for large documents">
                            <input type="checkbox" id="experimentalToggle">
                            <span>Experimental</span>
                        </label>
                    </div>

                    <!-- Workspace -->
                    <div class="workspace">
                        <div class="editor-pane">
                            <div class="pane-header">
                                <div class="pane-title">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                                    Editor
                                </div>
                            </div>
                            <textarea id="editor" placeholder="Type or paste Markdown here..." spellcheck="false" aria-label="Markdown editor"></textarea>
                        </div>
                        
                        <!-- Split Resizer -->
                        <div class="split-resizer" id="splitResizer" role="separator" aria-label="Resize panels" tabindex="0"></div>
                        
                        <div class="preview-pane">
                            <div class="pane-header">
                                <div class="pane-title">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                    Preview
                                </div>
                                <span id="renderTimeDisplay" style="font-size: 0.6875rem; color: var(--text-muted);"></span>
                            </div>
                            <div id="preview" class="preview-container" role="region" aria-label="Rendered preview" aria-live="polite">
                                <div class="preview-placeholder">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                        <polyline points="14 2 14 8 20 8"/>
                                    </svg>
                                    <p>Your rendered Markdown will appear here</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <aside class="sidebar">
                    <!-- Stats Card -->
                    <div class="sidebar-card">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                            Document Stats
                        </h3>
                        <div class="stat-row">
                            <span class="stat-label">Characters</span>
                            <span class="stat-val" id="statChars">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Words</span>
                            <span class="stat-val" id="statWords">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Lines</span>
                            <span class="stat-val" id="statLines">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Mode</span>
                            <span class="stat-val" id="statMode">CommonMark</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Render Time</span>
                            <span class="stat-val" id="statRender">0ms</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Live Preview</span>
                            <span class="stat-val" id="statLive">ON</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Reading Time</span>
                            <span class="stat-val" id="statReadTime">0 min</span>
                        </div>
                    </div>

                    <!-- Images Card -->
                    <div class="sidebar-card">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                            Images
                        </h3>
                        <div class="image-upload-zone" id="dropZone">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            <p>Click or drag images here</p>
                            <p style="font-size: 0.625rem; margin-top: 4px;">PNG, JPG, GIF, WebP (max 10MB each)</p>
                        </div>
                        <input type="file" id="imageInput" accept="image/png,image/jpeg,image/gif,image/webp" multiple style="display: none;">
                        <div id="imageList" class="image-list"></div>
                        <div class="storage-info" id="storageInfo">Session storage: 0 KB / 50 MB</div>
                    </div>

                    <!-- Status Card -->
                    <div class="sidebar-card">
                        <h3>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                            Autosave Status
                        </h3>
                        <div class="status-indicator">
                            <div class="status-dot" id="statusDot"></div>
                            <span class="status-text" id="statusText">Saved</span>
                        </div>
                        <div class="status-time" id="statusTime">Last: Just now</div>
                        <button class="status-btn" id="clearDraftBtn">Clear Saved Draft</button>
                    </div>

                    <!-- Disclaimer Card -->
                    <div class="disclaimer-card">
                        <h4>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                            Usage Notes
                        </h4>
                        <div class="disclaimer-content">
                            <ul>
                                <li><strong>MD 1.0:</strong> Original Markdown (Gruber) — pedantic mode matching markdown.pl behavior.</li>
                                <li><strong>CommonMark:</strong> Strict, unambiguous spec (0.31) — recommended for portability.</li>
                                <li><strong>GFM:</strong> GitHub Flavored Markdown (0.29) — adds tables, task lists, strikethrough.</li>
                                <li><strong>Session Images:</strong> Uploaded images are session-only; lost on refresh.</li>
                                <li><strong>No Warranty:</strong> This tool is provided as-is for convenience.</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Open Source Licenses -->
                    <div class="disclaimer-card" style="border-left-color: var(--text-muted); margin-top: 16px;">
                        <h4 style="color: var(--text-secondary);">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                            Open Source Licenses
                        </h4>
                        <div class="disclaimer-content">
                            <ul>
                                <li><strong><a href="https://github.com/markedjs/marked" target="_blank" rel="noopener" style="color: var(--accent-it);">marked</a></strong> — MIT License<br><span style="font-size: 0.7rem;">© 2018+ MarkedJS, © 2011-2018 Christopher Jeffrey</span></li>
                                <li><strong><a href="https://github.com/cure53/DOMPurify" target="_blank" rel="noopener" style="color: var(--accent-it);">DOMPurify</a></strong> — Apache 2.0 / MPL 2.0<br><span style="font-size: 0.7rem;">© Dr.-Ing. Mario Heiderich, Cure53</span></li>
                                <li><strong><a href="https://github.com/PrismJS/prism">Prism</a></strong> — MIT License<br><span>© Lea Verou</span></li>
                            </ul>
                        </div>
                    </div>
                </aside>

            </div>

        </main>

        <footer data-footer></footer>
    </div>

    <!-- Clear Confirmation Modal -->
    <div class="modal-overlay" id="clearModal">
        <div class="modal-card">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                <h3>Clear Document?</h3>
            </div>
            <div class="modal-body">
                <p>This will delete <strong id="clearCharCount">0 characters</strong> of content.</p>
                <p class="modal-note">This action cannot be undone.</p>
            </div>
            <div class="modal-actions">
                <button class="btn" id="clearModalCancel">Cancel</button>
                <button class="btn btn-danger" id="clearModalConfirm">Clear</button>
            </div>
        </div>
    </div>

    <!-- Download Modal -->
    <div class="modal-overlay" id="downloadModal">
        <div class="modal-card">
            <div class="modal-header">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="7 10 12 15 17 10"/>
                    <line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
                <h3>Download File</h3>
            </div>
            <div class="modal-body">
                <label for="filenameInput">Filename</label>
                <div class="filename-input-group">
                    <input type="text" id="filenameInput" value="markdown">
                    <span class="filename-ext" id="filenameExt">.md</span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn" id="downloadModalCancel">Cancel</button>
                <button class="btn btn-primary" id="downloadModalConfirm">Download</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Vendor Libraries -->
    <script type="module">
        import * as MarkedNS from "../js/vendor/markdown_preview/marked.esm.min.js";

        window.marked = MarkedNS.marked ?? MarkedNS.default;

        // Debug: quick sanity log (commented out)
        // console.log("Marked loaded:", typeof window.marked, window.marked);
    </script>
    <script src="../js/vendor/markdown_preview/purify.min.js"></script>
    <!-- Prism.js syntax highlighting (self-hosted) -->
    <script src="../js/vendor/markdown_preview/prism.min.js"></script>
    <script src="../js/vendor/markdown_preview/prism-python.min.js"></script>
    <script src="../js/vendor/markdown_preview/prism-javascript.min.js"></script>
    <script src="../js/vendor/markdown_preview/prism-css.min.js"></script>
    <script src="../js/vendor/markdown_preview/prism-bash.min.js"></script>
    <script src="../js/vendor/markdown_preview/prism-json.min.js"></script>
    <script src="../js/vendor/markdown_preview/prism-markdown.min.js"></script>
    <script>
        // Debug: verify Prism loaded (commented out)
        // if (typeof Prism !== 'undefined') {
        //     console.log('Prism loaded successfully. Languages:', Object.keys(Prism.languages));
        // } else {
        //     console.error('Prism failed to load!');
        // }
    </script>

    <script type="module" src="../js/shared.js"></script>
    <script type="module" src="../js/footer.js"></script>
    <script type="module" src="../js/markdown_preview/markdown-preview.js"></script>


</body>
</html>
