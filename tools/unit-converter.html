<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Converter | Tools Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/shared.css">
    <style>
        /* */
        .converter-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 24px;
            min-height: calc(100vh - 300px);
        }

        /* Category Sidebar */
        .category-sidebar {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 16px;
            height: fit-content;
            position: sticky;
            top: 24px;
        }

        .sidebar-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6875rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 8px 12px;
            margin-bottom: 8px;
        }

        .category-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .category-item {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8125rem;
            padding: 10px 12px;
            border-radius: 6px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-item:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .category-item.active {
            background: var(--accent-engineering-dim);
            color: var(--accent-engineering);
        }

        .category-icon {
            width: 20px;
            text-align: center;
            flex-shrink: 0;
        }

        /* Converter Panel */
        .converter-panel {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 32px;
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 32px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .panel-title h2 {
            font-size: 1.5rem;
        }

        .panel-icon {
            font-size: 1.5rem;
        }

        .swap-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .swap-btn:hover {
            background: var(--accent-engineering-dim);
            border-color: var(--accent-engineering);
            color: var(--accent-engineering);
        }

        .swap-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Conversion Area */
        .conversion-area {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 24px;
            align-items: end;
            margin-bottom: 32px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group input {
            font-size: 1.5rem;
            padding: 16px 20px;
            text-align: right;
        }

        .input-group select {
            font-size: 0.875rem;
        }

        .arrow-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            padding-bottom: 28px;
            color: var(--text-muted);
        }

        .arrow-divider svg {
            width: 32px;
            height: 32px;
        }

        /* Result Display */
        .result-display {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px 24px;
            margin-bottom: 32px;
        }

        .result-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6875rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .result-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 600;
            color: var(--accent-engineering);
            word-break: break-all;
        }

        .result-formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        /* Quick Reference Table */
        .quick-reference {
            margin-top: 32px;
        }

        .quick-reference h3 {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 8px;
        }

        .reference-item {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            padding: 10px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .reference-item:hover {
            border-color: var(--accent-engineering);
            background: var(--accent-engineering-dim);
        }

        .reference-item .from {
            color: var(--text-secondary);
        }

        .reference-item .to {
            color: var(--text-primary);
        }

        /* Mobile Responsive */
        @media (max-width: 900px) {
            .converter-layout {
                grid-template-columns: 1fr;
            }

            .category-sidebar {
                position: relative;
                top: 0;
            }

            .category-list {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 4px;
            }

            .category-item {
                padding: 8px 12px;
                font-size: 0.75rem;
            }

            .conversion-area {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .arrow-divider {
                padding: 0;
                transform: rotate(90deg);
            }

            .input-group input {
                font-size: 1.25rem;
                text-align: left;
            }

            .result-value {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .converter-panel {
                padding: 20px;
            }

            .panel-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <a href="../tools.html" class="back-link">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12"/>
                            <polyline points="12 19 5 12 12 5"/>
                        </svg>
                        Back to Tools
                    </a>
                </div>
                <div class="header-right">
                    <div class="theme-toggle">
                        <button data-theme-toggle="light" title="Light mode">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="5"/>
                                <line x1="12" y1="1" x2="12" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="23"/>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                <line x1="1" y1="12" x2="3" y2="12"/>
                                <line x1="21" y1="12" x2="23" y2="12"/>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                            </svg>
                        </button>
                        <button data-theme-toggle="dark" title="Dark mode">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div style="margin-top: 24px; display: flex; align-items: center; gap: 16px;">
                <div class="tool-icon-header engineering">‚áå</div>
                <div>
                    <h1>Unit Converter</h1>
                    <p class="tagline">// ENGINEERING UNIT CONVERSIONS</p>
                </div>
            </div>
        </header>

        <main>
            <div class="converter-layout">
                <!-- Category Sidebar -->
                <aside class="category-sidebar">
                    <div class="sidebar-title">Categories</div>
                    <ul class="category-list" id="categoryList">
                        <li class="category-item active" data-category="length"><span class="category-icon">üìè</span> Length</li>
                        <li class="category-item" data-category="mass"><span class="category-icon">‚öñÔ∏è</span> Mass</li>
                        <li class="category-item" data-category="volume"><span class="category-icon">üß™</span> Volume</li>
                        <li class="category-item" data-category="temperature"><span class="category-icon">üå°Ô∏è</span> Temperature</li>
                        <li class="category-item" data-category="pressure"><span class="category-icon">üí®</span> Pressure</li>
                        <li class="category-item" data-category="energy"><span class="category-icon">‚ö°</span> Energy</li>
                        <li class="category-item" data-category="power"><span class="category-icon">üîå</span> Power</li>
                        <li class="category-item" data-category="flowVolumetric"><span class="category-icon">üåä</span> Flow (Vol.)</li>
                        <li class="category-item" data-category="flowMass"><span class="category-icon">üìä</span> Flow (Mass)</li>
                        <li class="category-item" data-category="density"><span class="category-icon">üßä</span> Density</li>
                        <li class="category-item" data-category="viscosityDynamic"><span class="category-icon">üçØ</span> Viscosity (Dyn.)</li>
                        <li class="category-item" data-category="viscosityKinematic"><span class="category-icon">üíß</span> Viscosity (Kin.)</li>
                        <li class="category-item" data-category="force"><span class="category-icon">üí™</span> Force</li>
                        <li class="category-item" data-category="area"><span class="category-icon">‚¨õ</span> Area</li>
                        <li class="category-item" data-category="velocity"><span class="category-icon">üöÄ</span> Velocity</li>
                        <li class="category-item" data-category="time"><span class="category-icon">‚è±Ô∏è</span> Time</li>
                        <li class="category-item" data-category="torque"><span class="category-icon">üîß</span> Torque</li>
                        <li class="category-item" data-category="thermalConductivity"><span class="category-icon">üî•</span> Thermal Cond.</li>
                        <li class="category-item" data-category="specificHeat"><span class="category-icon">‚ô®Ô∏è</span> Specific Heat</li>
                        <li class="category-item" data-category="concentration"><span class="category-icon">üî¨</span> Concentration</li>
                    </ul>
                </aside>

                <!-- Converter Panel -->
                <div class="converter-panel">
                    <div class="panel-header">
                        <div class="panel-title">
                            <span class="panel-icon" id="panelIcon">üìè</span>
                            <h2 id="panelTitle">Length</h2>
                        </div>
                        <button class="swap-btn" id="swapBtn" title="Swap units">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="17 1 21 5 17 9"/>
                                <path d="M3 11V9a4 4 0 0 1 4-4h14"/>
                                <polyline points="7 23 3 19 7 15"/>
                                <path d="M21 13v2a4 4 0 0 1-4 4H3"/>
                            </svg>
                        </button>
                    </div>

                    <div class="conversion-area">
                        <div class="input-group">
                            <label for="fromValue">From</label>
                            <input type="number" id="fromValue" value="1" step="any">
                            <select id="fromUnit"></select>
                        </div>

                        <div class="arrow-divider">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"/>
                                <polyline points="12 5 19 12 12 19"/>
                            </svg>
                        </div>

                        <div class="input-group">
                            <label for="toValue">To</label>
                            <input type="number" id="toValue" readonly>
                            <select id="toUnit"></select>
                        </div>
                    </div>

                    <div class="result-display">
                        <div class="result-label">Result</div>
                        <div class="result-value" id="resultValue">1 m = 3.28084 ft</div>
                        <div class="result-formula" id="resultFormula">1 meter √ó 3.28084 = 3.28084 feet</div>
                    
                        <div class="result-note" id="resultNote" style="display: none;"></div>
                    </div>

                    <div class="quick-reference">
                        <h3>
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="16" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                            Quick Reference (click to use)
                        </h3>
                        <div class="reference-grid" id="referenceGrid"></div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <p class="footer-text">¬© 2025 Tools Hub ‚Äî Built for engineers</p>
                <nav class="footer-links">
                    <a href="../tools.html">All Tools</a>
                    <a href="#">Report Issue</a>
                </nav>
            </div>
        </footer>
    </div>

    <script src="../js/shared.js"></script>
    <script>
        // ============================================
        // Unit Definitions
        // ============================================
        const unitData = {
            length: {
                name: 'Length',
                icon: 'üìè',
                baseUnit: 'm',
                units: {
                    'm': { name: 'Meters', factor: 1 },
                    'km': { name: 'Kilometers', factor: 1000 },
                    'cm': { name: 'Centimeters', factor: 0.01 },
                    'mm': { name: 'Millimeters', factor: 0.001 },
                    'Œºm': { name: 'Micrometers', factor: 1e-6 },
                    'nm': { name: 'Nanometers', factor: 1e-9 },
                    'in': { name: 'Inches', factor: 0.0254 },
                    'ft': { name: 'Feet', factor: 0.3048 },
                    'yd': { name: 'Yards', factor: 0.9144 },
                    'mi': { name: 'Miles', factor: 1609.344 },
                    'nmi': { name: 'Nautical Miles', factor: 1852 },
                    'mil': { name: 'Mils (thou)', factor: 0.0000254 },
                    '√Ö': { name: 'Angstroms', factor: 1e-10 }
                },
                quickRefs: [
                    { from: '1 in', to: '25.4 mm' },
                    { from: '1 ft', to: '0.3048 m' },
                    { from: '1 mi', to: '1.609 km' },
                    { from: '1 m', to: '3.281 ft' }
                ]
            },
            mass: {
                name: 'Mass',
                icon: '‚öñÔ∏è',
                baseUnit: 'kg',
                units: {
                    'kg': { name: 'Kilograms', factor: 1 },
                    'g': { name: 'Grams', factor: 0.001 },
                    'mg': { name: 'Milligrams', factor: 1e-6 },
                    'Œºg': { name: 'Micrograms', factor: 1e-9 },
                    'tonne': { name: 'Metric Tons', factor: 1000 },
                    'lb': { name: 'Pounds', factor: 0.45359237 },
                    'oz': { name: 'Ounces', factor: 0.028349523125 },
                    'ton': { name: 'Short Tons (US)', factor: 907.18474 },
                    'ton_uk': { name: 'Long Tons (UK)', factor: 1016.0469088 },
                    'st': { name: 'Stones', factor: 6.35029318 },
                    'gr': { name: 'Grains', factor: 0.00006479891 },
                    'slug': { name: 'Slugs', factor: 14.593903 }
                },
                quickRefs: [
                    { from: '1 lb', to: '0.4536 kg' },
                    { from: '1 kg', to: '2.205 lb' },
                    { from: '1 oz', to: '28.35 g' },
                    { from: '1 ton', to: '0.9072 tonne' }
                ]
            },
            volume: {
                name: 'Volume',
                icon: 'üß™',
                baseUnit: 'L',
                units: {
                    'L': { name: 'Liters', factor: 1 },
                    'mL': { name: 'Milliliters', factor: 0.001 },
                    'ŒºL': { name: 'Microliters', factor: 1e-6 },
                    'm¬≥': { name: 'Cubic Meters', factor: 1000 },
                    'cm¬≥': { name: 'Cubic Centimeters', factor: 0.001 },
                    'mm¬≥': { name: 'Cubic Millimeters', factor: 1e-6 },
                    'gal': { name: 'US Gallons', factor: 3.785411784 },
                    'gal_uk': { name: 'UK Gallons', factor: 4.54609 },
                    'qt': { name: 'US Quarts', factor: 0.946352946 },
                    'pt': { name: 'US Pints', factor: 0.473176473 },
                    'cup': { name: 'US Cups', factor: 0.2365882365 },
                    'fl_oz': { name: 'US Fluid Ounces', factor: 0.0295735295625 },
                    'tbsp': { name: 'Tablespoons', factor: 0.01478676478125 },
                    'tsp': { name: 'Teaspoons', factor: 0.00492892159375 },
                    'ft¬≥': { name: 'Cubic Feet', factor: 28.316846592 },
                    'in¬≥': { name: 'Cubic Inches', factor: 0.016387064 },
                    'yd¬≥': { name: 'Cubic Yards', factor: 764.554857984 },
                    'bbl': { name: 'Oil Barrels (US)', factor: 158.987294928 },
                    'bbl_uk': { name: 'UK Barrels', factor: 163.65924 }
                },
                quickRefs: [
                    { from: '1 gal', to: '3.785 L' },
                    { from: '1 L', to: '0.2642 gal' },
                    { from: '1 ft¬≥', to: '28.32 L' },
                    { from: '1 bbl', to: '159 L' }
                ]
            },
            temperature: {
                name: 'Temperature',
                icon: 'üå°Ô∏è',
                baseUnit: 'K',
                special: true,
                units: {
                    '¬∞C': { name: 'Celsius' },
                    '¬∞F': { name: 'Fahrenheit' },
                    'K': { name: 'Kelvin' },
                    '¬∞R': { name: 'Rankine' }
                },
                quickRefs: [
                    { from: '0 ¬∞C', to: '32 ¬∞F' },
                    { from: '100 ¬∞C', to: '212 ¬∞F' },
                    { from: '0 K', to: '-273.15 ¬∞C' },
                    { from: '25 ¬∞C', to: '77 ¬∞F' }
                ]
            },
            pressure: {
                name: 'Pressure',
                icon: 'üí®',
                baseUnit: 'Pa',
                units: {
                    'Pa': { name: 'Pascals', factor: 1 },
                    'kPa': { name: 'Kilopascals', factor: 1000 },
                    'MPa': { name: 'Megapascals', factor: 1e6 },
                    'GPa': { name: 'Gigapascals', factor: 1e9 },
                    'bar': { name: 'Bar', factor: 100000 },
                    'mbar': { name: 'Millibar', factor: 100 },
                    'atm': { name: 'Atmospheres', factor: 101325 },
                    'psi': { name: 'PSI', factor: 6894.757293168 },
                    'ksi': { name: 'KSI', factor: 6894757.293168 },
                    'psf': { name: 'PSF', factor: 47.88025898 },
                    'mmHg': { name: 'mmHg (Torr)', factor: 133.322387415 },
                    'inHg': { name: 'Inches Hg', factor: 3386.389 },
                    'mmH‚ÇÇO': { name: 'mm Water', factor: 9.80665 },
                    'inH‚ÇÇO': { name: 'Inches Water', factor: 249.08891 },
                    'ftH‚ÇÇO': { name: 'Feet Water', factor: 2989.06692 },
                    'kg/cm¬≤': { name: 'kg/cm¬≤', factor: 98066.5 },
                    'N/mm¬≤': { name: 'N/mm¬≤', factor: 1e6 }
                },
                quickRefs: [
                    { from: '1 atm', to: '101.325 kPa' },
                    { from: '1 atm', to: '14.696 psi' },
                    { from: '1 bar', to: '14.504 psi' },
                    { from: '1 psi', to: '6.895 kPa' }
                ]
            },
            energy: {
                name: 'Energy',
                icon: '‚ö°',
                baseUnit: 'J',
                units: {
                    'J': { name: 'Joules', factor: 1 },
                    'kJ': { name: 'Kilojoules', factor: 1000 },
                    'MJ': { name: 'Megajoules', factor: 1e6 },
                    'GJ': { name: 'Gigajoules', factor: 1e9 },
                    'cal': { name: 'Calories', factor: 4.184 },
                    'kcal': { name: 'Kilocalories', factor: 4184 },
                    'BTU': { name: 'BTU', factor: 1055.05585262 },
                    'MMBTU': { name: 'MMBTU', factor: 1055055852.62 },
                    'therm': { name: 'Therms', factor: 105505585.262 },
                    'Wh': { name: 'Watt-hours', factor: 3600 },
                    'kWh': { name: 'Kilowatt-hours', factor: 3600000 },
                    'MWh': { name: 'Megawatt-hours', factor: 3.6e9 },
                    'eV': { name: 'Electron Volts', factor: 1.602176634e-19 },
                    'ft¬∑lbf': { name: 'Foot-pounds', factor: 1.3558179483 },
                    'erg': { name: 'Ergs', factor: 1e-7 },
                    'hp¬∑h': { name: 'Horsepower-hours', factor: 2684519.5377 }
                },
                quickRefs: [
                    { from: '1 BTU', to: '1.055 kJ' },
                    { from: '1 kWh', to: '3.6 MJ' },
                    { from: '1 kcal', to: '4.184 kJ' },
                    { from: '1 therm', to: '105.5 MJ' }
                ]
            },
            power: {
                name: 'Power',
                icon: 'üîå',
                baseUnit: 'W',
                units: {
                    'W': { name: 'Watts', factor: 1 },
                    'kW': { name: 'Kilowatts', factor: 1000 },
                    'MW': { name: 'Megawatts', factor: 1e6 },
                    'GW': { name: 'Gigawatts', factor: 1e9 },
                    'mW': { name: 'Milliwatts', factor: 0.001 },
                    'hp': { name: 'Horsepower (mech)', factor: 745.69987158 },
                    'hp_m': { name: 'Horsepower (metric)', factor: 735.49875 },
                    'hp_e': { name: 'Horsepower (elec)', factor: 746 },
                    'BTU/hr': { name: 'BTU/hour', factor: 0.29307107 },
                    'BTU/min': { name: 'BTU/minute', factor: 17.5842642 },
                    'BTU/s': { name: 'BTU/second', factor: 1055.05585 },
                    'ton_ref': { name: 'Tons Refrig.', factor: 3516.8528 },
                    'cal/s': { name: 'Calories/sec', factor: 4.184 },
                    'kcal/hr': { name: 'kcal/hour', factor: 1.163 },
                    'ft¬∑lbf/s': { name: 'ft¬∑lbf/sec', factor: 1.3558179483 },
                    'J/s': { name: 'Joules/sec', factor: 1 }
                },
                quickRefs: [
                    { from: '1 hp', to: '0.7457 kW' },
                    { from: '1 kW', to: '3412 BTU/hr' },
                    { from: '1 ton', to: '3.517 kW' },
                    { from: '1 MW', to: '1341 hp' }
                ]
            },
            flowVolumetric: {
                name: 'Flow (Volumetric)',
                icon: 'üåä',
                baseUnit: 'L/s',
                units: {
                    'L/s': { name: 'Liters/sec', factor: 1 },
                    'L/min': { name: 'Liters/min', factor: 1/60 },
                    'L/hr': { name: 'Liters/hour', factor: 1/3600 },
                    'mL/min': { name: 'mL/min', factor: 1/60000 },
                    'm¬≥/s': { name: 'm¬≥/sec', factor: 1000 },
                    'm¬≥/min': { name: 'm¬≥/min', factor: 1000/60 },
                    'm¬≥/hr': { name: 'm¬≥/hour', factor: 1000/3600 },
                    'm¬≥/day': { name: 'm¬≥/day', factor: 1000/86400 },
                    'gpm': { name: 'US gal/min', factor: 0.0630901964 },
                    'gph': { name: 'US gal/hour', factor: 0.00105150327 },
                    'gpd': { name: 'US gal/day', factor: 0.0000438126364 },
                    'cfm': { name: 'ft¬≥/min (CFM)', factor: 0.471947443 },
                    'cfs': { name: 'ft¬≥/sec (CFS)', factor: 28.316846592 },
                    'cfh': { name: 'ft¬≥/hour', factor: 0.00786579072 },
                    'bbl/day': { name: 'Barrels/day', factor: 0.00184012912 },
                    'MGD': { name: 'Million gal/day', factor: 43.8126364 },
                    'SCFM': { name: 'Std ft¬≥/min', factor: 0.471947443 }
                },
                quickRefs: [
                    { from: '1 gpm', to: '3.785 L/min' },
                    { from: '1 cfm', to: '28.32 L/min' },
                    { from: '1 m¬≥/hr', to: '4.403 gpm' },
                    { from: '1 bbl/day', to: '0.0066 m¬≥/hr' }
                ]
            },
            flowMass: {
                name: 'Flow (Mass)',
                icon: 'üìä',
                baseUnit: 'kg/s',
                units: {
                    'kg/s': { name: 'kg/sec', factor: 1 },
                    'kg/min': { name: 'kg/min', factor: 1/60 },
                    'kg/hr': { name: 'kg/hour', factor: 1/3600 },
                    'kg/day': { name: 'kg/day', factor: 1/86400 },
                    'g/s': { name: 'g/sec', factor: 0.001 },
                    'g/min': { name: 'g/min', factor: 0.001/60 },
                    'tonne/hr': { name: 'tonne/hour', factor: 1000/3600 },
                    'tonne/day': { name: 'tonne/day', factor: 1000/86400 },
                    'lb/s': { name: 'lb/sec', factor: 0.45359237 },
                    'lb/min': { name: 'lb/min', factor: 0.45359237/60 },
                    'lb/hr': { name: 'lb/hour', factor: 0.45359237/3600 },
                    'ton/hr': { name: 'Short ton/hr', factor: 907.18474/3600 },
                    'ton/day': { name: 'Short ton/day', factor: 907.18474/86400 }
                },
                quickRefs: [
                    { from: '1 lb/hr', to: '0.4536 kg/hr' },
                    { from: '1 kg/s', to: '7937 lb/hr' },
                    { from: '1 tonne/hr', to: '2205 lb/hr' },
                    { from: '1000 lb/hr', to: '0.454 tonne/hr' }
                ]
            },
            density: {
                name: 'Density',
                icon: 'üßä',
                baseUnit: 'kg/m¬≥',
                units: {
                    'kg/m¬≥': { name: 'kg/m¬≥', factor: 1 },
                    'g/cm¬≥': { name: 'g/cm¬≥', factor: 1000 },
                    'g/mL': { name: 'g/mL', factor: 1000 },
                    'kg/L': { name: 'kg/L', factor: 1000 },
                    'g/L': { name: 'g/L', factor: 1 },
                    'mg/mL': { name: 'mg/mL', factor: 1 },
                    'lb/ft¬≥': { name: 'lb/ft¬≥', factor: 16.01846337 },
                    'lb/in¬≥': { name: 'lb/in¬≥', factor: 27679.9047 },
                    'lb/gal': { name: 'lb/US gal', factor: 119.826427 },
                    'lb/gal_uk': { name: 'lb/UK gal', factor: 99.776373 },
                    'slug/ft¬≥': { name: 'slug/ft¬≥', factor: 515.378819 },
                    'oz/in¬≥': { name: 'oz/in¬≥', factor: 1729.99405 },
                    'tonne/m¬≥': { name: 'tonne/m¬≥', factor: 1000 },
                    'SG': { name: 'Specific Gravity', factor: 1000 }
                },
                quickRefs: [
                    { from: '1 g/cm¬≥', to: '62.43 lb/ft¬≥' },
                    { from: '1 lb/ft¬≥', to: '16.02 kg/m¬≥' },
                    { from: '1 lb/gal', to: '119.8 kg/m¬≥' },
                    { from: '1 SG', to: '8.345 lb/gal' }
                ]
            },
            viscosityDynamic: {
                name: 'Viscosity (Dynamic)',
                icon: 'üçØ',
                baseUnit: 'Pa¬∑s',
                units: {
                    'Pa¬∑s': { name: 'Pascal-seconds', factor: 1 },
                    'mPa¬∑s': { name: 'mPa¬∑s', factor: 0.001 },
                    'P': { name: 'Poise', factor: 0.1 },
                    'cP': { name: 'Centipoise', factor: 0.001 },
                    'kg/(m¬∑s)': { name: 'kg/(m¬∑s)', factor: 1 },
                    'N¬∑s/m¬≤': { name: 'N¬∑s/m¬≤', factor: 1 },
                    'lb/(ft¬∑s)': { name: 'lb/(ft¬∑s)', factor: 1.48816394 },
                    'lb/(ft¬∑hr)': { name: 'lb/(ft¬∑hr)', factor: 0.000413378872 },
                    'lbf¬∑s/ft¬≤': { name: 'lbf¬∑s/ft¬≤', factor: 47.8802589 },
                    'lbf¬∑s/in¬≤': { name: 'Reyn', factor: 6894.75729 },
                    'slug/(ft¬∑s)': { name: 'slug/(ft¬∑s)', factor: 47.8802589 }
                },
                quickRefs: [
                    { from: '1 cP', to: '0.001 Pa¬∑s' },
                    { from: '1 P', to: '100 cP' },
                    { from: '1 lb/(ft¬∑s)', to: '1488 cP' },
                    { from: 'Water@20¬∞C', to: '1.002 cP' }
                ]
            },
            viscosityKinematic: {
                name: 'Viscosity (Kinematic)',
                icon: 'üíß',
                baseUnit: 'm¬≤/s',
                units: {
                    'm¬≤/s': { name: 'm¬≤/s', factor: 1 },
                    'mm¬≤/s': { name: 'mm¬≤/s', factor: 1e-6 },
                    'cm¬≤/s': { name: 'cm¬≤/s (Stokes)', factor: 1e-4 },
                    'St': { name: 'Stokes', factor: 1e-4 },
                    'cSt': { name: 'Centistokes', factor: 1e-6 },
                    'ft¬≤/s': { name: 'ft¬≤/s', factor: 0.09290304 },
                    'ft¬≤/hr': { name: 'ft¬≤/hr', factor: 0.09290304/3600 },
                    'in¬≤/s': { name: 'in¬≤/s', factor: 0.00064516 }
                },
                quickRefs: [
                    { from: '1 cSt', to: '1 mm¬≤/s' },
                    { from: '1 St', to: '100 cSt' },
                    { from: '1 ft¬≤/s', to: '92903 cSt' },
                    { from: 'Water@20¬∞C', to: '1.004 cSt' }
                ]
            },
            force: {
                name: 'Force',
                icon: 'üí™',
                baseUnit: 'N',
                units: {
                    'N': { name: 'Newtons', factor: 1 },
                    'kN': { name: 'Kilonewtons', factor: 1000 },
                    'MN': { name: 'Meganewtons', factor: 1e6 },
                    'mN': { name: 'Millinewtons', factor: 0.001 },
                    'dyn': { name: 'Dynes', factor: 1e-5 },
                    'kgf': { name: 'Kilogram-force', factor: 9.80665 },
                    'gf': { name: 'Gram-force', factor: 0.00980665 },
                    'lbf': { name: 'Pound-force', factor: 4.4482216152605 },
                    'kip': { name: 'Kips', factor: 4448.2216152605 },
                    'ozf': { name: 'Ounce-force', factor: 0.2780138509 },
                    'tonf': { name: 'Short ton-force', factor: 8896.443230521 },
                    'tonf_uk': { name: 'Long ton-force', factor: 9964.01641818 },
                    'pdl': { name: 'Poundals', factor: 0.138254954376 }
                },
                quickRefs: [
                    { from: '1 lbf', to: '4.448 N' },
                    { from: '1 kgf', to: '9.807 N' },
                    { from: '1 kN', to: '224.8 lbf' },
                    { from: '1 kip', to: '4.448 kN' }
                ]
            },
            area: {
                name: 'Area',
                icon: '‚¨õ',
                baseUnit: 'm¬≤',
                units: {
                    'm¬≤': { name: 'Square Meters', factor: 1 },
                    'km¬≤': { name: 'Square Kilometers', factor: 1e6 },
                    'cm¬≤': { name: 'Square Centimeters', factor: 1e-4 },
                    'mm¬≤': { name: 'Square Millimeters', factor: 1e-6 },
                    'ha': { name: 'Hectares', factor: 10000 },
                    'are': { name: 'Ares', factor: 100 },
                    'ft¬≤': { name: 'Square Feet', factor: 0.09290304 },
                    'in¬≤': { name: 'Square Inches', factor: 0.00064516 },
                    'yd¬≤': { name: 'Square Yards', factor: 0.83612736 },
                    'mi¬≤': { name: 'Square Miles', factor: 2589988.110336 },
                    'acre': { name: 'Acres', factor: 4046.8564224 },
                    'circ_mil': { name: 'Circular Mils', factor: 5.067074790975e-10 }
                },
                quickRefs: [
                    { from: '1 ft¬≤', to: '0.0929 m¬≤' },
                    { from: '1 acre', to: '4047 m¬≤' },
                    { from: '1 ha', to: '2.471 acres' },
                    { from: '1 mi¬≤', to: '640 acres' }
                ]
            },
            velocity: {
                name: 'Velocity',
                icon: 'üöÄ',
                baseUnit: 'm/s',
                units: {
                    'm/s': { name: 'Meters/sec', factor: 1 },
                    'km/h': { name: 'km/hour', factor: 1/3.6 },
                    'km/s': { name: 'km/sec', factor: 1000 },
                    'cm/s': { name: 'cm/sec', factor: 0.01 },
                    'mm/s': { name: 'mm/sec', factor: 0.001 },
                    'mph': { name: 'Miles/hour', factor: 0.44704 },
                    'fps': { name: 'Feet/sec', factor: 0.3048 },
                    'fpm': { name: 'Feet/min', factor: 0.00508 },
                    'fph': { name: 'Feet/hour', factor: 0.3048/3600 },
                    'ips': { name: 'Inches/sec', factor: 0.0254 },
                    'kn': { name: 'Knots', factor: 0.514444444 },
                    'mach': { name: 'Mach (@sea level)', factor: 340.29 },
                    'c': { name: 'Speed of Light', factor: 299792458 }
                },
                quickRefs: [
                    { from: '1 m/s', to: '3.281 ft/s' },
                    { from: '1 mph', to: '1.609 km/h' },
                    { from: '1 kn', to: '1.852 km/h' },
                    { from: '100 km/h', to: '62.14 mph' }
                ]
            },
            time: {
                name: 'Time',
                icon: '‚è±Ô∏è',
                baseUnit: 's',
                units: {
                    's': { name: 'Seconds', factor: 1 },
                    'ms': { name: 'Milliseconds', factor: 0.001 },
                    'Œºs': { name: 'Microseconds', factor: 1e-6 },
                    'ns': { name: 'Nanoseconds', factor: 1e-9 },
                    'min': { name: 'Minutes', factor: 60 },
                    'hr': { name: 'Hours', factor: 3600 },
                    'day': { name: 'Days', factor: 86400 },
                    'week': { name: 'Weeks', factor: 604800 },
                    'month': { name: 'Months (30d)', factor: 2592000 },
                    'year': { name: 'Years (365d)', factor: 31536000 }
                },
                quickRefs: [
                    { from: '1 hr', to: '3600 s' },
                    { from: '1 day', to: '86400 s' },
                    { from: '1 week', to: '168 hr' },
                    { from: '1 year', to: '8760 hr' }
                ]
            },
            torque: {
                name: 'Torque',
                icon: 'üîß',
                baseUnit: 'N¬∑m',
                units: {
                    'N¬∑m': { name: 'Newton-meters', factor: 1 },
                    'kN¬∑m': { name: 'Kilonewton-meters', factor: 1000 },
                    'N¬∑cm': { name: 'Newton-cm', factor: 0.01 },
                    'N¬∑mm': { name: 'Newton-mm', factor: 0.001 },
                    'kgf¬∑m': { name: 'kgf-meters', factor: 9.80665 },
                    'kgf¬∑cm': { name: 'kgf-cm', factor: 0.0980665 },
                    'gf¬∑cm': { name: 'gf-cm', factor: 0.0000980665 },
                    'lbf¬∑ft': { name: 'Pound-feet', factor: 1.3558179483 },
                    'lbf¬∑in': { name: 'Pound-inches', factor: 0.1129848290 },
                    'ozf¬∑in': { name: 'Ounce-inches', factor: 0.00706155181 },
                    'dyn¬∑cm': { name: 'Dyne-cm', factor: 1e-7 }
                },
                quickRefs: [
                    { from: '1 lbf¬∑ft', to: '1.356 N¬∑m' },
                    { from: '1 N¬∑m', to: '0.7376 lbf¬∑ft' },
                    { from: '1 kgf¬∑m', to: '9.807 N¬∑m' },
                    { from: '1 lbf¬∑in', to: '0.1130 N¬∑m' }
                ]
            },
            thermalConductivity: {
                name: 'Thermal Conductivity',
                icon: 'üî•',
                baseUnit: 'W/(m¬∑K)',
                units: {
                    'W/(m¬∑K)': { name: 'W/(m¬∑K)', factor: 1 },
                    'W/(m¬∑¬∞C)': { name: 'W/(m¬∑¬∞C)', factor: 1 },
                    'kW/(m¬∑K)': { name: 'kW/(m¬∑K)', factor: 1000 },
                    'W/(cm¬∑K)': { name: 'W/(cm¬∑K)', factor: 100 },
                    'mW/(m¬∑K)': { name: 'mW/(m¬∑K)', factor: 0.001 },
                    'BTU/(hr¬∑ft¬∑¬∞F)': { name: 'BTU/(hr¬∑ft¬∑¬∞F)', factor: 1.730734666 },
                    'BTU¬∑in/(hr¬∑ft¬≤¬∑¬∞F)': { name: 'BTU¬∑in/(hr¬∑ft¬≤¬∑¬∞F)', factor: 0.144227889 },
                    'cal/(s¬∑cm¬∑¬∞C)': { name: 'cal/(s¬∑cm¬∑¬∞C)', factor: 418.4 },
                    'kcal/(hr¬∑m¬∑¬∞C)': { name: 'kcal/(hr¬∑m¬∑¬∞C)', factor: 1.163 }
                },
                quickRefs: [
                    { from: '1 BTU/(hr¬∑ft¬∑¬∞F)', to: '1.731 W/(m¬∑K)' },
                    { from: '1 W/(m¬∑K)', to: '0.578 BTU/(hr¬∑ft¬∑¬∞F)' },
                    { from: 'Copper', to: '~401 W/(m¬∑K)' },
                    { from: 'Steel', to: '~50 W/(m¬∑K)' }
                ]
            },
            specificHeat: {
                name: 'Specific Heat',
                icon: '‚ô®Ô∏è',
                baseUnit: 'J/(kg¬∑K)',
                units: {
                    'J/(kg¬∑K)': { name: 'J/(kg¬∑K)', factor: 1 },
                    'J/(kg¬∑¬∞C)': { name: 'J/(kg¬∑¬∞C)', factor: 1 },
                    'kJ/(kg¬∑K)': { name: 'kJ/(kg¬∑K)', factor: 1000 },
                    'J/(g¬∑K)': { name: 'J/(g¬∑K)', factor: 1000 },
                    'cal/(g¬∑¬∞C)': { name: 'cal/(g¬∑¬∞C)', factor: 4184 },
                    'kcal/(kg¬∑¬∞C)': { name: 'kcal/(kg¬∑¬∞C)', factor: 4184 },
                    'BTU/(lb¬∑¬∞F)': { name: 'BTU/(lb¬∑¬∞F)', factor: 4186.8 },
                    'BTU/(lb¬∑¬∞R)': { name: 'BTU/(lb¬∑¬∞R)', factor: 4186.8 }
                },
                quickRefs: [
                    { from: '1 BTU/(lb¬∑¬∞F)', to: '4.187 kJ/(kg¬∑K)' },
                    { from: '1 cal/(g¬∑¬∞C)', to: '4.184 kJ/(kg¬∑K)' },
                    { from: 'Water', to: '4.186 kJ/(kg¬∑K)' },
                    { from: 'Air', to: '1.005 kJ/(kg¬∑K)' }
                ]
            },
            concentration: {
                name: 'Concentration',
                icon: 'üî¨',
                baseUnit: 'mol/L',
                units: {
                    'mol/L': { name: 'mol/L (M)', factor: 1 },
                    'mmol/L': { name: 'mmol/L (mM)', factor: 0.001 },
                    'Œºmol/L': { name: 'Œºmol/L (ŒºM)', factor: 1e-6 },
                    'nmol/L': { name: 'nmol/L (nM)', factor: 1e-9 },
                    'mol/m¬≥': { name: 'mol/m¬≥', factor: 0.001 },
                    'kmol/m¬≥': { name: 'kmol/m¬≥', factor: 1 },
                    'mol/mL': { name: 'mol/mL', factor: 1000 },
                    'eq/L': { name: 'eq/L (N)', factor: 1 },
                    'meq/L': { name: 'meq/L', factor: 0.001 }
                },
                quickRefs: [
                    { from: '1 M', to: '1000 mM' },
                    { from: '1 mol/L', to: '1000 mol/m¬≥' },
                    { from: '1 meq/L', to: '1 mmol/L (mono)' },
                    { from: '1 N', to: '1 M (mono)' }
                ]
            }
        };

        // ============================================
        // Converter Logic
        // ============================================
        let currentCategory = 'length';

        const elements = {
            categoryList: document.getElementById('categoryList'),
            panelIcon: document.getElementById('panelIcon'),
            panelTitle: document.getElementById('panelTitle'),
            fromValue: document.getElementById('fromValue'),
            fromUnit: document.getElementById('fromUnit'),
            toValue: document.getElementById('toValue'),
            toUnit: document.getElementById('toUnit'),
            resultValue: document.getElementById('resultValue'),
            resultFormula: document.getElementById('resultFormula'),
            referenceGrid: document.getElementById('referenceGrid'),
            swapBtn: document.getElementById('swapBtn')
        };

        // Initialize
        function init() {
            bindCategoryEvents();
            bindInputEvents();
            loadCategory(currentCategory);
        }

        function bindCategoryEvents() {
            elements.categoryList.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', () => {
                    document.querySelector('.category-item.active').classList.remove('active');
                    item.classList.add('active');
                    loadCategory(item.dataset.category);
                });
            });

            elements.swapBtn.addEventListener('click', swapUnits);
        }

        function bindInputEvents() {
            elements.fromValue.addEventListener('input', debounce(convert, 50));
            elements.fromUnit.addEventListener('change', convert);
            elements.toUnit.addEventListener('change', convert);
        }

        function loadCategory(category) {
            currentCategory = category;
            const data = unitData[category];
            
            elements.panelIcon.textContent = data.icon;
            elements.panelTitle.textContent = data.name;
            
            // Populate unit dropdowns
            const unitKeys = Object.keys(data.units);
            
            elements.fromUnit.innerHTML = unitKeys.map(key => 
                `<option value="${key}">${key} ‚Äî ${data.units[key].name}</option>`
            ).join('');
            
            elements.toUnit.innerHTML = unitKeys.map(key => 
                `<option value="${key}">${key} ‚Äî ${data.units[key].name}</option>`
            ).join('');
            
            // Set sensible defaults (first and second units)
            elements.fromUnit.selectedIndex = 0;
            elements.toUnit.selectedIndex = Math.min(1, unitKeys.length - 1);
            
            // Set default value
            elements.fromValue.value = 1;
            
            // Load quick references
            loadQuickReferences(data.quickRefs);
            
            convert();
        }

        function loadQuickReferences(refs) {
            elements.referenceGrid.innerHTML = refs.map(ref => `
                <div class="reference-item" data-from="${ref.from}" data-to="${ref.to}">
                    <span class="from">${ref.from}</span>
                    <span class="to">= ${ref.to}</span>
                </div>
            `).join('');
            
            // Bind click events
            elements.referenceGrid.querySelectorAll('.reference-item').forEach(item => {
                item.addEventListener('click', () => {
                    const fromStr = item.dataset.from;
                    const match = fromStr.match(/^([\d.]+)\s*(.+)$/);
                    if (match) {
                        elements.fromValue.value = match[1];
                        const unitKey = findUnitKey(match[2].trim());
                        if (unitKey) {
                            elements.fromUnit.value = unitKey;
                        }
                        convert();
                    }
                });
            });
        }

        function findUnitKey(unitStr) {
            const data = unitData[currentCategory];
            for (const key of Object.keys(data.units)) {
                if (key === unitStr || data.units[key].name.toLowerCase().includes(unitStr.toLowerCase())) {
                    return key;
                }
            }
            return null;
        }

        function convert() {
            const data = unitData[currentCategory];
            const fromVal = parseFloat(elements.fromValue.value) || 0;
            const fromUnit = elements.fromUnit.value;
            const toUnit = elements.toUnit.value;
            
            let result;
            
            if (data.special && currentCategory === 'temperature') {
                result = convertTemperature(fromVal, fromUnit, toUnit);
            } else {
                // Standard conversion via base unit
                const fromFactor = data.units[fromUnit].factor;
                const toFactor = data.units[toUnit].factor;
                const baseValue = fromVal * fromFactor;
                result = baseValue / toFactor;
            }
            
            // Format result
            const formattedResult = formatNumber(result);
            elements.toValue.value = formattedResult;
            
            // Update display
            const fromFormatted = formatNumber(fromVal);
            elements.resultValue.textContent = `${fromFormatted} ${fromUnit} = ${formattedResult} ${toUnit}`;
            
            // Formula
            if (data.special && currentCategory === 'temperature') {
                elements.resultFormula.textContent = getTemperatureFormula(fromUnit, toUnit);
            } else {
                const conversionFactor = data.units[fromUnit].factor / data.units[toUnit].factor;
                elements.resultFormula.textContent = `${fromFormatted} √ó ${formatNumber(conversionFactor)} = ${formattedResult}`;
            }

            // Handle Definitions/Ambiguity
            const noteElement = document.getElementById('resultNote');
            const ambiguousUnits = ['cal', 'kcal', 'BTU', 'MMBTU', 'therm'];
            
            // Check if either unit is in our "ambiguous" list
            const isAmbiguous = ambiguousUnits.some(u => fromUnit.includes(u) || toUnit.includes(u));

            if (isAmbiguous) {
                // Customize this logic based on which specific definition you are using per category
                let msg = "";
                if (currentCategory === 'energy' || currentCategory === 'specificHeat') {
                    // code: Energy uses 4.184 (Thermochemical), but Power uses IT. 
                    // This detects if we are in the category using Thermochemical.
                    msg = "Using Thermochemical definition (1 cal = 4.184 J).";
                } else if (currentCategory === 'power') {
                    msg = "Using International Table definition (1 cal = 4.1868 J).";
                }
                
                if (msg) {
                    noteElement.textContent = "Note: " + msg;
                    noteElement.style.display = 'block';
                } else {
                    noteElement.style.display = 'none';
                }
            } else if (currentCategory === 'pressure' && (fromUnit === 'mmHg' || toUnit === 'mmHg')) {
                //Add note for mmHg vs Torr want to be super precise
                noteElement.textContent = "Note: Using conventional mmHg (13595.1 kg/m¬≥), not Torr.";
                noteElement.style.display = 'block';
            } else {
                noteElement.style.display = 'none';
            }
        }

        function convertTemperature(value, from, to) {
            // Convert to Kelvin first
            let kelvin;
            switch (from) {
                case '¬∞C': kelvin = value + 273.15; break;
                case '¬∞F': kelvin = (value + 459.67) * 5/9; break;
                case 'K': kelvin = value; break;
                case '¬∞R': kelvin = value * 5/9; break;
            }
            
            // Convert from Kelvin to target
            switch (to) {
                case '¬∞C': return kelvin - 273.15;
                case '¬∞F': return kelvin * 9/5 - 459.67;
                case 'K': return kelvin;
                case '¬∞R': return kelvin * 9/5;
            }
        }

        function getTemperatureFormula(from, to) {
            const formulas = {
                '¬∞C-¬∞F': '¬∞F = ¬∞C √ó 9/5 + 32',
                '¬∞F-¬∞C': '¬∞C = (¬∞F - 32) √ó 5/9',
                '¬∞C-K': 'K = ¬∞C + 273.15',
                'K-¬∞C': '¬∞C = K - 273.15',
                '¬∞F-K': 'K = (¬∞F + 459.67) √ó 5/9',
                'K-¬∞F': '¬∞F = K √ó 9/5 - 459.67',
                '¬∞C-¬∞R': '¬∞R = (¬∞C + 273.15) √ó 9/5',
                '¬∞R-¬∞C': '¬∞C = ¬∞R √ó 5/9 - 273.15',
                '¬∞F-¬∞R': '¬∞R = ¬∞F + 459.67',
                '¬∞R-¬∞F': '¬∞F = ¬∞R - 459.67',
                'K-¬∞R': '¬∞R = K √ó 9/5',
                '¬∞R-K': 'K = ¬∞R √ó 5/9'
            };
            return formulas[`${from}-${to}`] || 'Direct conversion';
        }

        function swapUnits() {
            const tempUnit = elements.fromUnit.value;
            elements.fromUnit.value = elements.toUnit.value;
            elements.toUnit.value = tempUnit;
            
            // Optionally swap values too
            const tempVal = elements.fromValue.value;
            elements.fromValue.value = elements.toValue.value;
            
            convert();
        }

        function formatNumber(num) {
            if (num === 0) return '0';
            if (Math.abs(num) < 0.0001 || Math.abs(num) >= 1e10) {
                return num.toExponential(6);
            }
            // Smart precision
            const str = num.toPrecision(10);
            return parseFloat(str).toString();
        }

        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        // Start
        init();
    </script>
</body>
</html>